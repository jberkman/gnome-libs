diff -ru fribidi-0.1.12.orig/Makefile.am fribidi-0.1.12/Makefile.am
--- fribidi-0.1.12.orig/Makefile.am	Fri May 19 11:14:37 2000
+++ fribidi-0.1.12/Makefile.am	Fri Sep 29 21:06:21 2000
@@ -48,3 +48,7 @@
 TESTS = run.tests
 
 bin_SCRIPTS = fribidi-config
+
+pkgconfigdir = $(libexecdir)/pkgconfig
+pkgconfig_DATA = fribidi.pc
+
diff -ru fribidi-0.1.12.orig/Makefile.in fribidi-0.1.12/Makefile.in
--- fribidi-0.1.12.orig/Makefile.in	Fri May 19 11:59:14 2000
+++ fribidi-0.1.12/Makefile.in	Fri Sep 29 21:06:55 2000
@@ -63,7 +63,7 @@
 CC = @CC@
 DLLTOOL = @DLLTOOL@
 GLIB_CFLAGS = @GLIB_CFLAGS@
-GLIB_CONFIG = @GLIB_CONFIG@
+GLIB_CONFIG_2_0 = @GLIB_CONFIG_2_0@
 GLIB_LIBS = @GLIB_LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
@@ -104,10 +104,13 @@
 TESTS = run.tests
 
 bin_SCRIPTS = fribidi-config
+
+pkgconfigdir = $(libexecdir)/pkgconfig
+pkgconfig_DATA = fribidi.pc
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = config.h
-CONFIG_CLEAN_FILES =  fribidi-config
+CONFIG_CLEAN_FILES =  fribidi-config fribidi.pc
 LTLIBRARIES =  $(lib_LTLIBRARIES)
 
 
@@ -137,17 +140,20 @@
 LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
 LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@
+DATA =  $(pkgconfig_DATA)
+
 HEADERS =  $(libfribidiinc_HEADERS)
 
 DIST_COMMON =  README ./stamp-h.in AUTHORS COPYING ChangeLog INSTALL \
 Makefile.am Makefile.in NEWS THANKS TODO acconfig.h aclocal.m4 \
 config.guess config.h.in config.sub configure configure.in \
-fribidi-config.in install-sh ltconfig ltmain.sh missing mkinstalldirs
+fribidi-config.in fribidi.pc.in install-sh ltconfig ltmain.sh missing \
+mkinstalldirs
 
 
 DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
 
-TAR = gtar
+TAR = tar
 GZIP_ENV = --best
 SOURCES = $(libfribidi_la_SOURCES) $(fribidi_SOURCES) $(test_fribidi_SOURCES) $(fribidi_benchmark_SOURCES)
 OBJECTS = $(libfribidi_la_OBJECTS) $(fribidi_OBJECTS) $(test_fribidi_OBJECTS) $(fribidi_benchmark_OBJECTS)
@@ -199,6 +205,8 @@
 maintainer-clean-hdr:
 fribidi-config: $(top_builddir)/config.status fribidi-config.in
 	cd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
+fribidi.pc: $(top_builddir)/config.status fribidi.pc.in
+	cd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
 mostlyclean-libLTLIBRARIES:
 
@@ -331,6 +339,25 @@
 	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`; \
 	done
 
+install-pkgconfigDATA: $(pkgconfig_DATA)
+	@$(NORMAL_INSTALL)
+	$(mkinstalldirs) $(DESTDIR)$(pkgconfigdir)
+	@list='$(pkgconfig_DATA)'; for p in $$list; do \
+	  if test -f $(srcdir)/$$p; then \
+	    echo " $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(pkgconfigdir)/$$p"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(pkgconfigdir)/$$p; \
+	  else if test -f $$p; then \
+	    echo " $(INSTALL_DATA) $$p $(DESTDIR)$(pkgconfigdir)/$$p"; \
+	    $(INSTALL_DATA) $$p $(DESTDIR)$(pkgconfigdir)/$$p; \
+	  fi; fi; \
+	done
+
+uninstall-pkgconfigDATA:
+	@$(NORMAL_UNINSTALL)
+	list='$(pkgconfig_DATA)'; for p in $$list; do \
+	  rm -f $(DESTDIR)$(pkgconfigdir)/$$p; \
+	done
+
 install-libfribidiincHEADERS: $(libfribidiinc_HEADERS)
 	@$(NORMAL_INSTALL)
 	$(mkinstalldirs) $(DESTDIR)$(libfribidiincdir)
@@ -480,23 +492,25 @@
 		install-binSCRIPTS
 install-exec: install-exec-am
 
-install-data-am: install-libfribidiincHEADERS
+install-data-am: install-pkgconfigDATA install-libfribidiincHEADERS
 install-data: install-data-am
 
 install-am: all-am
 	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
 install: install-am
 uninstall-am: uninstall-libLTLIBRARIES uninstall-binPROGRAMS \
-		uninstall-binSCRIPTS uninstall-libfribidiincHEADERS
+		uninstall-binSCRIPTS uninstall-pkgconfigDATA \
+		uninstall-libfribidiincHEADERS
 uninstall: uninstall-am
-all-am: Makefile $(LTLIBRARIES) $(PROGRAMS) $(SCRIPTS) $(HEADERS) \
-		config.h
+all-am: Makefile $(LTLIBRARIES) $(PROGRAMS) $(SCRIPTS) $(DATA) \
+		$(HEADERS) config.h
 all-redirect: all-am
 install-strip:
 	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
 installdirs:
 	$(mkinstalldirs)  $(DESTDIR)$(libdir) $(DESTDIR)$(bindir) \
-		$(DESTDIR)$(bindir) $(DESTDIR)$(libfribidiincdir)
+		$(DESTDIR)$(bindir) $(DESTDIR)$(pkgconfigdir) \
+		$(DESTDIR)$(libfribidiincdir)
 
 
 mostlyclean-generic:
@@ -552,7 +566,8 @@
 clean-binPROGRAMS maintainer-clean-binPROGRAMS uninstall-binPROGRAMS \
 install-binPROGRAMS mostlyclean-noinstPROGRAMS distclean-noinstPROGRAMS \
 clean-noinstPROGRAMS maintainer-clean-noinstPROGRAMS \
-uninstall-binSCRIPTS install-binSCRIPTS uninstall-libfribidiincHEADERS \
+uninstall-binSCRIPTS install-binSCRIPTS uninstall-pkgconfigDATA \
+install-pkgconfigDATA uninstall-libfribidiincHEADERS \
 install-libfribidiincHEADERS tags mostlyclean-tags distclean-tags \
 clean-tags maintainer-clean-tags distdir check-TESTS info-am info \
 dvi-am dvi check check-am installcheck-am installcheck all-recursive-am \
diff -ru fribidi-0.1.12.orig/aclocal.m4 fribidi-0.1.12/aclocal.m4
--- fribidi-0.1.12.orig/aclocal.m4	Fri May 19 11:14:44 2000
+++ fribidi-0.1.12/aclocal.m4	Fri Sep 29 21:06:53 2000
@@ -177,12 +177,7 @@
 esac
 
 # Check for any special flags to pass to ltconfig.
-#
-# the following will cause an existing older ltconfig to fail, so
-# we ignore this at the expense of the cache file... Checking this 
-# will just take longer ... bummer!
-#libtool_flags="--cache-file=$cache_file"
-#
+libtool_flags="--cache-file=$cache_file"
 test "$enable_shared" = no && libtool_flags="$libtool_flags --disable-shared"
 test "$enable_static" = no && libtool_flags="$libtool_flags --disable-static"
 test "$enable_fast_install" = no && libtool_flags="$libtool_flags --disable-fast-install"
@@ -542,13 +537,13 @@
 # Configure paths for GLIB
 # Owen Taylor     97-11-3
 
-dnl AM_PATH_GLIB([MINIMUM-VERSION, [ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND [, MODULES]]]])
+dnl AM_PATH_GLIB_2_0([MINIMUM-VERSION, [ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND [, MODULES]]]])
 dnl Test for GLIB, and define GLIB_CFLAGS and GLIB_LIBS, if "gmodule" or 
 dnl gthread is specified in MODULES, pass to glib-config
 dnl
-AC_DEFUN(AM_PATH_GLIB,
+AC_DEFUN(AM_PATH_GLIB_2_0,
 [dnl 
-dnl Get the cflags and libraries from the glib-config script
+dnl Get the cflags and libraries from the glib-config-2.0 script
 dnl
 AC_ARG_WITH(glib-prefix,[  --with-glib-prefix=PFX   Prefix where GLIB is installed (optional)],
             glib_config_prefix="$withval", glib_config_prefix="")
@@ -559,14 +554,14 @@
 
   if test x$glib_config_exec_prefix != x ; then
      glib_config_args="$glib_config_args --exec-prefix=$glib_config_exec_prefix"
-     if test x${GLIB_CONFIG+set} != xset ; then
-        GLIB_CONFIG=$glib_config_exec_prefix/bin/glib-config
+     if test x${GLIB_CONFIG_2_0+set} != xset ; then
+        GLIB_CONFIG_2_0=$glib_config_exec_prefix/bin/glib-config-2.0
      fi
   fi
   if test x$glib_config_prefix != x ; then
      glib_config_args="$glib_config_args --prefix=$glib_config_prefix"
-     if test x${GLIB_CONFIG+set} != xset ; then
-        GLIB_CONFIG=$glib_config_prefix/bin/glib-config
+     if test x${GLIB_CONFIG_2_0+set} != xset ; then
+        GLIB_CONFIG_2_0=$glib_config_prefix/bin/glib-config-2.0
      fi
   fi
 
@@ -576,26 +571,29 @@
          gmodule) 
              glib_config_args="$glib_config_args gmodule"
          ;;
+         gobject) 
+             glib_config_args="$glib_config_args gobject"
+         ;;
          gthread) 
              glib_config_args="$glib_config_args gthread"
          ;;
       esac
   done
 
-  AC_PATH_PROG(GLIB_CONFIG, glib-config, no)
-  min_glib_version=ifelse([$1], ,0.99.7,$1)
+  AC_PATH_PROG(GLIB_CONFIG_2_0, glib-config-2.0, no)
+  min_glib_version=ifelse([$1], ,1.3.1,$1)
   AC_MSG_CHECKING(for GLIB - version >= $min_glib_version)
   no_glib=""
-  if test "$GLIB_CONFIG" = "no" ; then
+  if test "$GLIB_CONFIG_2_0" = "no" ; then
     no_glib=yes
   else
-    GLIB_CFLAGS=`$GLIB_CONFIG $glib_config_args --cflags`
-    GLIB_LIBS=`$GLIB_CONFIG $glib_config_args --libs`
-    glib_config_major_version=`$GLIB_CONFIG $glib_config_args --version | \
+    GLIB_CFLAGS=`$GLIB_CONFIG_2_0 $glib_config_args --cflags`
+    GLIB_LIBS=`$GLIB_CONFIG_2_0 $glib_config_args --libs`
+    glib_config_major_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
-    glib_config_minor_version=`$GLIB_CONFIG $glib_config_args --version | \
+    glib_config_minor_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
-    glib_config_micro_version=`$GLIB_CONFIG $glib_config_args --version | \
+    glib_config_micro_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
     if test "x$enable_glibtest" = "xyes" ; then
       ac_save_CFLAGS="$CFLAGS"
@@ -604,7 +602,7 @@
       LIBS="$GLIB_LIBS $LIBS"
 dnl
 dnl Now check if the installed GLIB is sufficiently new. (Also sanity
-dnl checks the results of glib-config to some extent
+dnl checks the results of glib-config-2.0 to some extent
 dnl
       rm -f conf.glibtest
       AC_TRY_RUN([
@@ -631,16 +629,16 @@
       (glib_minor_version != $glib_config_minor_version) ||
       (glib_micro_version != $glib_config_micro_version))
     {
-      printf("\n*** 'glib-config --version' returned %d.%d.%d, but GLIB (%d.%d.%d)\n", 
+      printf("\n*** 'glib-config-2.0 --version' returned %d.%d.%d, but GLIB (%d.%d.%d)\n", 
              $glib_config_major_version, $glib_config_minor_version, $glib_config_micro_version,
              glib_major_version, glib_minor_version, glib_micro_version);
-      printf ("*** was found! If glib-config was correct, then it is best\n");
+      printf ("*** was found! If glib-config-2.0 was correct, then it is best\n");
       printf ("*** to remove the old version of GLIB. You may also be able to fix the error\n");
       printf("*** by modifying your LD_LIBRARY_PATH enviroment variable, or by editing\n");
       printf("*** /etc/ld.so.conf. Make sure you have run ldconfig if that is\n");
       printf("*** required on your system.\n");
-      printf("*** If glib-config was wrong, set the environment variable GLIB_CONFIG\n");
-      printf("*** to point to the correct copy of glib-config, and remove the file config.cache\n");
+      printf("*** If glib-config-2.0 was wrong, set the environment variable GLIB_CONFIG_2_0\n");
+      printf("*** to point to the correct copy of glib-config-2.0, and remove the file config.cache\n");
       printf("*** before re-running configure\n");
     } 
   else if ((glib_major_version != GLIB_MAJOR_VERSION) ||
@@ -669,10 +667,10 @@
         printf("*** GLIB is always available from ftp://ftp.gtk.org.\n");
         printf("***\n");
         printf("*** If you have already installed a sufficiently new version, this error\n");
-        printf("*** probably means that the wrong copy of the glib-config shell script is\n");
+        printf("*** probably means that the wrong copy of the glib-config-2.0 shell script is\n");
         printf("*** being found. The easiest way to fix this is to remove the old version\n");
-        printf("*** of GLIB, but you can also set the GLIB_CONFIG environment to point to the\n");
-        printf("*** correct copy of glib-config. (In this case, you will have to\n");
+        printf("*** of GLIB, but you can also set the GLIB_CONFIG_2_0 environment to point to the\n");
+        printf("*** correct copy of glib-config-2.0. (In this case, you will have to\n");
         printf("*** modify your LD_LIBRARY_PATH enviroment variable, or edit /etc/ld.so.conf\n");
         printf("*** so that the correct libraries are found at run-time))\n");
       }
@@ -685,15 +683,15 @@
      fi
   fi
   if test "x$no_glib" = x ; then
-     AC_MSG_RESULT(yes)
+     AC_MSG_RESULT(yes (version $glib_config_major_version.$glib_config_minor_version.$glib_config_micro_version))
      ifelse([$2], , :, [$2])     
   else
      AC_MSG_RESULT(no)
-     if test "$GLIB_CONFIG" = "no" ; then
-       echo "*** The glib-config script installed by GLIB could not be found"
+     if test "$GLIB_CONFIG_2_0" = "no" ; then
+       echo "*** The glib-config-2.0 script installed by GLIB could not be found"
        echo "*** If GLIB was installed in PREFIX, make sure PREFIX/bin is in"
-       echo "*** your path, or set the GLIB_CONFIG environment variable to the"
-       echo "*** full path to glib-config."
+       echo "*** your path, or set the GLIB_CONFIG_2_0 environment variable to the"
+       echo "*** full path to glib-config-2.0."
      else
        if test -f conf.glibtest ; then
         :
@@ -722,7 +720,7 @@
         [ echo "*** The test program failed to compile or link. See the file config.log for the"
           echo "*** exact error that occured. This usually means GLIB was incorrectly installed"
           echo "*** or that you have moved GLIB since it was installed. In the latter case, you"
-          echo "*** may want to edit the glib-config script: $GLIB_CONFIG" ])
+          echo "*** may want to edit the glib-config-2.0 script: $GLIB_CONFIG_2_0" ])
           CFLAGS="$ac_save_CFLAGS"
           LIBS="$ac_save_LIBS"
        fi
diff -ru fribidi-0.1.12.orig/configure fribidi-0.1.12/configure
--- fribidi-0.1.12.orig/configure	Fri May 19 11:14:51 2000
+++ fribidi-0.1.12/configure	Fri Sep 29 21:06:56 2000
@@ -1316,12 +1316,7 @@
 esac
 
 # Check for any special flags to pass to ltconfig.
-#
-# the following will cause an existing older ltconfig to fail, so
-# we ignore this at the expense of the cache file... Checking this 
-# will just take longer ... bummer!
-#libtool_flags="--cache-file=$cache_file"
-#
+libtool_flags="--cache-file=$cache_file"
 test "$enable_shared" = no && libtool_flags="$libtool_flags --disable-shared"
 test "$enable_static" = no && libtool_flags="$libtool_flags --disable-static"
 test "$enable_fast_install" = no && libtool_flags="$libtool_flags --disable-fast-install"
@@ -1343,8 +1338,8 @@
 case "$lt_target" in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 1347 "configure"' > conftest.$ac_ext
-  if { (eval echo configure:1348: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  echo '#line 1342 "configure"' > conftest.$ac_ext
+  if { (eval echo configure:1343: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case "`/usr/bin/file conftest.o`" in
     *32-bit*)
       LD="${LD-ld} -32"
@@ -1365,19 +1360,19 @@
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
-echo "configure:1369: checking whether the C compiler needs -belf" >&5
+echo "configure:1364: checking whether the C compiler needs -belf" >&5
 if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1374 "configure"
+#line 1369 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1376: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   lt_cv_cc_needs_belf=yes
 else
@@ -1482,7 +1477,7 @@
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1486: checking for $ac_word" >&5
+echo "configure:1481: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1512,7 +1507,7 @@
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1516: checking for $ac_word" >&5
+echo "configure:1511: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1563,7 +1558,7 @@
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1567: checking for $ac_word" >&5
+echo "configure:1562: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1595,7 +1590,7 @@
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1599: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:1594: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -1606,12 +1601,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 1610 "configure"
+#line 1605 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:1615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -1637,12 +1632,12 @@
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1641: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1636: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:1646: checking whether we are using GNU C" >&5
+echo "configure:1641: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1651,7 +1646,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1655: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1650: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -1670,7 +1665,7 @@
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1674: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:1669: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1713,7 +1708,7 @@
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:1717: checking for a BSD compatible install" >&5
+echo "configure:1712: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1766,7 +1761,7 @@
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:1770: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:1765: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1820,14 +1815,14 @@
 
   if test x$glib_config_exec_prefix != x ; then
      glib_config_args="$glib_config_args --exec-prefix=$glib_config_exec_prefix"
-     if test x${GLIB_CONFIG+set} != xset ; then
-        GLIB_CONFIG=$glib_config_exec_prefix/bin/glib-config
+     if test x${GLIB_CONFIG_2_0+set} != xset ; then
+        GLIB_CONFIG_2_0=$glib_config_exec_prefix/bin/glib-config-2.0
      fi
   fi
   if test x$glib_config_prefix != x ; then
      glib_config_args="$glib_config_args --prefix=$glib_config_prefix"
-     if test x${GLIB_CONFIG+set} != xset ; then
-        GLIB_CONFIG=$glib_config_prefix/bin/glib-config
+     if test x${GLIB_CONFIG_2_0+set} != xset ; then
+        GLIB_CONFIG_2_0=$glib_config_prefix/bin/glib-config-2.0
      fi
   fi
 
@@ -1837,25 +1832,28 @@
          gmodule) 
              glib_config_args="$glib_config_args gmodule"
          ;;
+         gobject) 
+             glib_config_args="$glib_config_args gobject"
+         ;;
          gthread) 
              glib_config_args="$glib_config_args gthread"
          ;;
       esac
   done
 
-  # Extract the first word of "glib-config", so it can be a program name with args.
-set dummy glib-config; ac_word=$2
+  # Extract the first word of "glib-config-2.0", so it can be a program name with args.
+set dummy glib-config-2.0; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1850: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
+echo "configure:1848: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG_2_0'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  case "$GLIB_CONFIG" in
+  case "$GLIB_CONFIG_2_0" in
   /*)
-  ac_cv_path_GLIB_CONFIG="$GLIB_CONFIG" # Let the user override the test with a path.
+  ac_cv_path_GLIB_CONFIG_2_0="$GLIB_CONFIG_2_0" # Let the user override the test with a path.
   ;;
   ?:/*)			 
-  ac_cv_path_GLIB_CONFIG="$GLIB_CONFIG" # Let the user override the test with a dos path.
+  ac_cv_path_GLIB_CONFIG_2_0="$GLIB_CONFIG_2_0" # Let the user override the test with a dos path.
   ;;
   *)
   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
@@ -1863,36 +1861,36 @@
   for ac_dir in $ac_dummy; do 
     test -z "$ac_dir" && ac_dir=.
     if test -f $ac_dir/$ac_word; then
-      ac_cv_path_GLIB_CONFIG="$ac_dir/$ac_word"
+      ac_cv_path_GLIB_CONFIG_2_0="$ac_dir/$ac_word"
       break
     fi
   done
   IFS="$ac_save_ifs"
-  test -z "$ac_cv_path_GLIB_CONFIG" && ac_cv_path_GLIB_CONFIG="no"
+  test -z "$ac_cv_path_GLIB_CONFIG_2_0" && ac_cv_path_GLIB_CONFIG_2_0="no"
   ;;
 esac
 fi
-GLIB_CONFIG="$ac_cv_path_GLIB_CONFIG"
-if test -n "$GLIB_CONFIG"; then
-  echo "$ac_t""$GLIB_CONFIG" 1>&6
+GLIB_CONFIG_2_0="$ac_cv_path_GLIB_CONFIG_2_0"
+if test -n "$GLIB_CONFIG_2_0"; then
+  echo "$ac_t""$GLIB_CONFIG_2_0" 1>&6
 else
   echo "$ac_t""no" 1>&6
 fi
 
-  min_glib_version=1.2.0
+  min_glib_version=1.3.0
   echo $ac_n "checking for GLIB - version >= $min_glib_version""... $ac_c" 1>&6
-echo "configure:1885: checking for GLIB - version >= $min_glib_version" >&5
+echo "configure:1883: checking for GLIB - version >= $min_glib_version" >&5
   no_glib=""
-  if test "$GLIB_CONFIG" = "no" ; then
+  if test "$GLIB_CONFIG_2_0" = "no" ; then
     no_glib=yes
   else
-    GLIB_CFLAGS=`$GLIB_CONFIG $glib_config_args --cflags`
-    GLIB_LIBS=`$GLIB_CONFIG $glib_config_args --libs`
-    glib_config_major_version=`$GLIB_CONFIG $glib_config_args --version | \
+    GLIB_CFLAGS=`$GLIB_CONFIG_2_0 $glib_config_args --cflags`
+    GLIB_LIBS=`$GLIB_CONFIG_2_0 $glib_config_args --libs`
+    glib_config_major_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-    glib_config_minor_version=`$GLIB_CONFIG $glib_config_args --version | \
+    glib_config_minor_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
-    glib_config_micro_version=`$GLIB_CONFIG $glib_config_args --version | \
+    glib_config_micro_version=`$GLIB_CONFIG_2_0 $glib_config_args --version | \
            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
     if test "x$enable_glibtest" = "xyes" ; then
       ac_save_CFLAGS="$CFLAGS"
@@ -1904,7 +1902,7 @@
   echo $ac_n "cross compiling; assumed OK... $ac_c"
 else
   cat > conftest.$ac_ext <<EOF
-#line 1908 "configure"
+#line 1906 "configure"
 #include "confdefs.h"
 
 #include <glib.h>
@@ -1930,16 +1928,16 @@
       (glib_minor_version != $glib_config_minor_version) ||
       (glib_micro_version != $glib_config_micro_version))
     {
-      printf("\n*** 'glib-config --version' returned %d.%d.%d, but GLIB (%d.%d.%d)\n", 
+      printf("\n*** 'glib-config-2.0 --version' returned %d.%d.%d, but GLIB (%d.%d.%d)\n", 
              $glib_config_major_version, $glib_config_minor_version, $glib_config_micro_version,
              glib_major_version, glib_minor_version, glib_micro_version);
-      printf ("*** was found! If glib-config was correct, then it is best\n");
+      printf ("*** was found! If glib-config-2.0 was correct, then it is best\n");
       printf ("*** to remove the old version of GLIB. You may also be able to fix the error\n");
       printf("*** by modifying your LD_LIBRARY_PATH enviroment variable, or by editing\n");
       printf("*** /etc/ld.so.conf. Make sure you have run ldconfig if that is\n");
       printf("*** required on your system.\n");
-      printf("*** If glib-config was wrong, set the environment variable GLIB_CONFIG\n");
-      printf("*** to point to the correct copy of glib-config, and remove the file config.cache\n");
+      printf("*** If glib-config-2.0 was wrong, set the environment variable GLIB_CONFIG_2_0\n");
+      printf("*** to point to the correct copy of glib-config-2.0, and remove the file config.cache\n");
       printf("*** before re-running configure\n");
     } 
   else if ((glib_major_version != GLIB_MAJOR_VERSION) ||
@@ -1968,10 +1966,10 @@
         printf("*** GLIB is always available from ftp://ftp.gtk.org.\n");
         printf("***\n");
         printf("*** If you have already installed a sufficiently new version, this error\n");
-        printf("*** probably means that the wrong copy of the glib-config shell script is\n");
+        printf("*** probably means that the wrong copy of the glib-config-2.0 shell script is\n");
         printf("*** being found. The easiest way to fix this is to remove the old version\n");
-        printf("*** of GLIB, but you can also set the GLIB_CONFIG environment to point to the\n");
-        printf("*** correct copy of glib-config. (In this case, you will have to\n");
+        printf("*** of GLIB, but you can also set the GLIB_CONFIG_2_0 environment to point to the\n");
+        printf("*** correct copy of glib-config-2.0. (In this case, you will have to\n");
         printf("*** modify your LD_LIBRARY_PATH enviroment variable, or edit /etc/ld.so.conf\n");
         printf("*** so that the correct libraries are found at run-time))\n");
       }
@@ -1980,7 +1978,7 @@
 }
 
 EOF
-if { (eval echo configure:1984: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:1982: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -1997,15 +1995,15 @@
      fi
   fi
   if test "x$no_glib" = x ; then
-     echo "$ac_t""yes" 1>&6
+     echo "$ac_t""yes (version $glib_config_major_version.$glib_config_minor_version.$glib_config_micro_version)" 1>&6
      :     
   else
      echo "$ac_t""no" 1>&6
-     if test "$GLIB_CONFIG" = "no" ; then
-       echo "*** The glib-config script installed by GLIB could not be found"
+     if test "$GLIB_CONFIG_2_0" = "no" ; then
+       echo "*** The glib-config-2.0 script installed by GLIB could not be found"
        echo "*** If GLIB was installed in PREFIX, make sure PREFIX/bin is in"
-       echo "*** your path, or set the GLIB_CONFIG environment variable to the"
-       echo "*** full path to glib-config."
+       echo "*** your path, or set the GLIB_CONFIG_2_0 environment variable to the"
+       echo "*** full path to glib-config-2.0."
      else
        if test -f conf.glibtest ; then
         :
@@ -2014,7 +2012,7 @@
           CFLAGS="$CFLAGS $GLIB_CFLAGS"
           LIBS="$LIBS $GLIB_LIBS"
           cat > conftest.$ac_ext <<EOF
-#line 2018 "configure"
+#line 2016 "configure"
 #include "confdefs.h"
 
 #include <glib.h>
@@ -2024,7 +2022,7 @@
  return ((glib_major_version) || (glib_minor_version) || (glib_micro_version)); 
 ; return 0; }
 EOF
-if { (eval echo configure:2028: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
    echo "*** The test program compiled, but did not run. This usually means"
           echo "*** that the run-time linker is not finding GLIB or finding the wrong"
@@ -2047,7 +2045,7 @@
    echo "*** The test program failed to compile or link. See the file config.log for the"
           echo "*** exact error that occured. This usually means GLIB was incorrectly installed"
           echo "*** or that you have moved GLIB since it was installed. In the latter case, you"
-          echo "*** may want to edit the glib-config script: $GLIB_CONFIG" 
+          echo "*** may want to edit the glib-config-2.0 script: $GLIB_CONFIG_2_0" 
 fi
 rm -f conftest*
           CFLAGS="$ac_save_CFLAGS"
@@ -2167,6 +2165,7 @@
 trap 'rm -fr `echo "
 Makefile
 fribidi-config
+fribidi.pc
  config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
 EOF
 cat >> $CONFIG_STATUS <<EOF
@@ -2224,7 +2223,7 @@
 s%@CC@%$CC%g
 s%@LN_S@%$LN_S%g
 s%@LIBTOOL@%$LIBTOOL%g
-s%@GLIB_CONFIG@%$GLIB_CONFIG%g
+s%@GLIB_CONFIG_2_0@%$GLIB_CONFIG_2_0%g
 s%@GLIB_CFLAGS@%$GLIB_CFLAGS%g
 s%@GLIB_LIBS@%$GLIB_LIBS%g
 
@@ -2270,6 +2269,7 @@
 
 CONFIG_FILES=\${CONFIG_FILES-"Makefile
 fribidi-config
+fribidi.pc
 "}
 EOF
 cat >> $CONFIG_STATUS <<\EOF
diff -ru fribidi-0.1.12.orig/configure.in fribidi-0.1.12/configure.in
--- fribidi-0.1.12.orig/configure.in	Fri May 19 11:08:15 2000
+++ fribidi-0.1.12/configure.in	Fri Sep 29 21:06:51 2000
@@ -14,12 +14,13 @@
 AC_PROG_INSTALL
 AC_PROG_MAKE_SET
 
-AM_PATH_GLIB(1.2.0,,
+AM_PATH_GLIB_2_0(1.3.0,,
   AC_MSG_ERROR(Test for GLIB failed. See the file 'INSTALL' for help.))
 
 AC_OUTPUT([
 Makefile
 fribidi-config
+fribidi.pc
 ],[case "$CONFIG_FILES" in
 *fribidi-config*)chmod +x fribidi-config;;
 esac])
--- fribidi-0.1.12.orig/fribidi.pc.in	Fri Sep 29 22:49:00 2000
+++ fribidi-0.1.12/fribidi.pc.in	Fri Sep 29 21:10:03 2000
@@ -0,0 +1,14 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+VERSION="@VERSION@"
+REQUIRES="glib-2.0"
+CFLAGS="$CFLAGS"
+LIBS_PATH="-L${libdir} $LIBS_PATH"
+LIBS_LINK_SELF="-lfribidi $LIBS_LINK_SELF"
+LIBS_LINK_SYSTEM="$LIBS_LINK_SYSTEM"
+
+
+
