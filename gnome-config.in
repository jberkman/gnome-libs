#!/bin/sh

usage()
{
   echo "Usage: gnome-config [--version] [--libs] [--cflags] [--LIBRARY] [--list-libraries]"
   exit 1
}

if test $# -eq 0; then
    usage
fi

cflags=false
libs=false

while test $# -gt 0; do
  case "$1" in
  -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) optarg= ;;
  esac

  case $1 in
     --version)
       	echo $GNOME_VERSION
       	;;
     --help)
	usage
	;;
     --cflags)
       	cflags=true
       	;;
     --libs)
       	libs=true
       	;;
     --gnome)
       	the_libs="-L@prefix@/lib @need_gnome_support@ $the_libs"
  	the_flags="@GNOME_INCLUDEDIR@ @GTK_CFLAGS@ $the_flags"
	;;
     --gnomeui)
	the_libs="-L@prefix@/lib @need_gnome_support@ $the_libs"
	the_flags="@GNOME_INCLUDEDIR@ @GTK_CFLAGS@"
	;;
     --gtkxmhtml)
	the_libs="-L@prefix@/lib @GTKXMHTML_LIBS@ $the_libs"
	;;
     --zvt)
	the_libs="-L@prefix@ @ZVT_LIBS@ $the_libs"
	;;
     --*)
	libname=`echo $1 | sed 's/--//'`
	if test -f @prefix@/lib/${libname}Conf.sh; then
		. @prefix@/lib/${libname}Conf.sh
		up_name=`echo $libname | tr a-z A-Z`
		lib_name="${up_name}_LIB"
		flags_name="${up_name}_FLAGS"
		cmd="$`echo $lib_name`"
		the_libs="`eval echo $cmd` $the_libs"
		the_flags="`eval echo $cmd` $the_flags"
	fi
	;;
  esac
  shift
done

if $cflags;
then
	all_flags="$the_flags"
fi

if $libs;
then
	all_flags="$the_libs $all_flags"
fi

if test "x$all_flags" = "x "; then
   exit 1
fi

set `echo $all_flags`
count=$#

#
# Straight out any possible duplicates
#
while test $count -gt 0; do
	cmd="\$$count"
	val=`eval "echo $cmd"`
	if echo $result | grep -- $val; then
	    echo encontrado
	else
	    result="$val $result"
	fi >& /dev/null
	count=`expr $count - 1`
done
echo $result
exit 0