		Porting GNOME 1.0 Applications to GNOME 2.0


[this document is still work-in-progress.]

Notation
========

* MODIFIED

  The file/widget/feature has been modified in a source incompatible way,
  but it is possible to reuse old code without completely rewriting it
  (compatibility layer exists, fixable by scripts, ....)

* CHANGED API

  The API of this file/widget/feature has completely changed; it is not
  possible to reuse old code without rewriting at least large parts of it.

* ADDED FUNCTIONALITY

  There is some added functionality over GNOME 1.x.

* OBSOLETE

  The file/widget/feature is obsolete and it has been moved to libcompat.

* REMOVED

  The file/widget/feature has been completely removed, it is not in libcompat.
  This normally means that it is easier to fix code which was using this than
  to provide a compatibility layer.

* NEW

  The file/widget/feature is completely new in GNOME 2.0.

* UNKNOWN

  I don't know what's up with this.


How to prepare your GNOME 1.0 Applications for GNOME 2.0
========================================================

There are some things which you can do in your GNOME 1.0 Application
to make it easier to port them to GNOME 2.0 while still keeping
compatible with the GNOME 1.x platform.

We will add some new functions to the stable version of gnome-libs
after GNOME 1.4 which will help you to archive this. The most important
thing is to use accessor functions rather than accessing widget data
directly whereever it's possible. These new functions will help you
doing this.

* GnomeEntry - MODIFIED

  - this is isn't a GtkCombo any longer, but a GnomeSelector.

  The following functions have been removed:

  - gnome_entry_gtk_entry()

    GnomeEntry isn't a GtkCombo/GtkEntry anymore; use
    gnome_entry_get_text() and gnome_entry_set_text() to access
    the entry text.

  - gnome_entry_construct() - you can now use g_object_new() etc.

  The following functions are deprecated:

  - gnome_entry_get_history_id, gnome_entry_set_history_id
    gnome_entry_get_history_id, gnome_entry_set_max_saved
    gnome_entry_get_max_saved, gnome_entry_prepend_history
    gnome_entry_append_history, gnome_entry_load_history
    gnome_entry_save_history, gnome_entry_clear_history

    Use the corresponding functions in GnomeSelector.

  The following new functions have been added:

  - gnome_entry_get_text(), gnome_entry_set_text()

  These functions will be added to the stable gnome-libs after GNOME 1.4;
  in all existing code. To prepare things in GNOME 1.x:

  - use gnome_entry_get/set_text() rather than gnome_entry_gtk_entry()

  - try not to access any of the 'changed', 'history_id', 'items' and
    'max_saved' fields in the GnomeEntry directly, they will be private
    in GNOME 2.0.

* GnomeFileEntry - OBSOLETE

  - this has been replaced by GnomeFileSelector.

* GnomeIconEntry - MODIFIED + ADDED FUNCTIONALITY

  - this is now derived from GnomeFileSelector instead of GtkVBox.
  - previously, the difference between GnomeIconEntry and GnomePixmapEntry
    was that you could specify the size of the preview in a GnomePixmapEntry;
    this functionality has been moved into GnomeIconEntry so that
    GnomePixmapEntry is now obsolete.

  The following functions have been removed:

  - gnome_icon_entry_construct() - you can now use g_object_new() etc.
  - gnome_icon_entry_gnome_file_entry(): use parent class
  - gnome_icon_entry_gnome_entry (): use parent class
  - gnome_icon_entry_gtk_entry (): don't suck things out of this directly

  The following functions are deprecated:

  - gnome_icon_entry_set_pixmap_subdir(): Fixme, Fixme.
  - gnome_icon_entry_set_icon(): use gnome_selector_set_uri().

  The following new functions have been added:

  - gnome_icon_entry_get_icon_selector ()
  - gnome_icon_entry_set_preview_size (): formerly in GnomePixmapEntry.

  Other source incompatible changes:

  - `fentry', `pickbutton', `pick_dialog', `pick_dialog_dir' have been
    removed from the GnomeIconEntry instance struct.

* GnomePixmapEntry - OBSOLETE

  - this has been obsoleted by GnomeIconEntry.

* GnomeCalculator - REMOVED

  - this has been moved to libcompat for the moment; it should go somewhere
    else, but not in libgnomeui.

* GnomeNumberEntry - REMOVED

  - this was using GnomeCalculator and has been moved to libcompat as well.

* GnomeProcBar - REMOVED

  - this was only used in GTop and some applets; it has been moved into GTop.
  - the three applets will be moved into GTop as well to share some code with
    it for GNOME 2.0.

* gnome-properties, gnome-property-entries - REMOVED

  - this was only used in GTop and some applets; it is totally obsolete due
    to GConf.

* GnomeAbout - ADDED FUNCTIONALITY

  - some things have been added; it doesn't look finished to me.

* GnomeAnimator - UNKNOWN

  - I think this should be removed from libgnomeui.

* GnomeAppBar - MODIFIED

  The following functions are deprecated:

  - gnome_appbar_set_progress() - use gnome_appbar_set_progress_percentage().

  The following new functions have been added:

  - gnome_appbar_set_progress_percentage()
  - gnome_appbar_get_status()

  Other source incompatible changes:

  - all fields have been removed from the GnomeAppBar instance struct.

libgnome stuff:
===============

* gnome-config - ADDED FUNCTIONALITY

  - uses gbooleans rather then gints

  The following functions have been changed:

  - gnome_config_sync()
  - gnome_config_sync_file():  Now return a gboolean to indicate if the
    sync was successful.  Needed for GnomeDItem

* gnome-dentry - OBSOLETE

  - This has been replaced by GnomeDItem (gnome-ditem), and currently resides
    in libcompat

* GnomeDItem (gnome-ditem) - NEW

  - This is a far more flexible replacement for GnomeDEntry.  It allows adding
    of arbitrary fields without changing the API, and it does not clobber
    other info in the .desktop file.

* gnome-dns - OBSOLETE

  - There are other and better way of doing this

* gnome-exec - ADDED FUNCTIONALITY

  The following new functions have been added:

  - gnome_prepend_terminal_to_vector(): prepend the terminal accodring to user
    preference to the vector
  - gnome_execute_terminal_shell()
  - gnome_execute_terminal_shell_fds():  Execute in terminal shell according
    to user preference.

* gnome-help - OBSOLETE

  - gnome-helpsys from libgnomeui should be used

* gnome-history - OBSOLETE

  - gnome-recently-used from libgnomeui should be used

* gnome-i18n - ADDED FUNCTIONALITY

  - Return values are const correct

  The following new functions have been added:

  - gnome_i18n_push_c_numeric_locale()
    gnome_i18n_pop_c_numeric_locale():  Fucntions for pushing and popping
    a "C" numeric locale.  This is neccessary anywhere where a text file is
    read or written or anywhere where information exchange in numbers takes
    place as it's neccessary to use the C locale there to make it work in
    non-C locales.

* gnome-metadata - OBSOLETE

  - This is all now in gnome-vfs

* gnome-mime - OBSOLETE

  - This is all now in gnome-vfs

* gnome-mime-info - OBSOLETE

  - This is all now in gnome-vfs
  
* gnome-paper - ADDED FUNCTIONALITY

  - Return values are const correct

  The following new functions have been added:

  - gnome_unit_with_abbrev()
  - gnome_unit_name()
  - gnome_unit_abbrev()
  - gnome_unit_convert()

* gnome-popt - OBSOLETE

  - Apparently the new init stuff in libgnome takes care of this

* gnome-regex

  - Source compatible beautification

* gnome-score

  - const correct

* gnome-url - ADDED FUNCTIONALITY

  The following functions have been modified:

  - gnome_url_show(): const correct, returns a gboolean

  The following new functions have been added:

  - gnome_url_show_full():
  - gnome_url_display_context_free():  URL showing according to flags,
    and gets an actual error, and a history.  The history callback api is
    not nice, and needs to be still changed.

* gnome-util - MODIFIED + ADDED FUNCTIONALITY

  - const correct

  The following functions/macros have been removed:

  - g_filename_index()
  - g_filename_pointer():  These functions depended on g_basename, which is
    obscolete in glib 2
  - g_file_test(): Removed since glib2 includes this function
  - g_copy_strings()
  - g_unix_error_string():  Removed since glib2 includes equivalents, and
    has for quite a while

  The following functions have been added:

  - gnome_file_locate():  A more flexible file location functions which
    attempts to solve the issues of gnome_*_file functions.

* gnomelib-init, gnomelib-init2 - UNKNOWN

  - Apparently some sort of more flexible initialization

Last changed Feb 25, 2001.
Martin Baulig <baulig@suse.de>
George Lebl <jirka@5z.com>

(the old version of this file is at CVS revision 1.9)
