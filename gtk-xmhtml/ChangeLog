1998-01-28  Raja R Harinath  <harinath@cs.umn.edu>

	* gtk-xmhtml.h (WITH_GTK): #define only #ifndef.  Prevent GCC
	warning.  

	* Makefile.am (dist-hook): Look in $(srcdir).

Mon Jan 19 12:56:08 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gtk-xmhtml.c (gtk_xmhtml_realize): use
	gtk_widget_get_parent_window instead of widget->parent->window as
	posted by Owen.

	* Makefile.am (libgtkxmhtml_la_LIBADD): Add the Z_LIBS, JPEG_LIBS,
	PNG_LIBS and PNG_LIBS to the libgtkxmhtml_la_LIBADD, so that
	applications using this library do not need to autodetect which
	libraries this was linked with.

Wed Jan 14 19:28:01 1998  Federico Mena  <federico@bananoid.nuclecu.unam.mx>

	* colors.c (my_get_colors): Now we allocate the colors, just as
	Motif does.  I think they should be freed sometime, but they are
	not.  Lesstif does not free them, either.  I don't know if OSF
	Motif ever frees these colors...

Wed Jan 14 00:40:59 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* toolkit.h (XCCFree): Allow for empty color contexts.

	* gtk-xmhtml.c: Massive changes to allow proper initialization of
	widget (basically, we now create the widgets that make up the HTML
	widget first instead of waiting for the source routine to be
	invoked).
	

Tue Jan 13 22:04:43 1998  Federico Mena  <federico@bananoid.nuclecu.unam.mx>

	* gtk-xmhtml.c (gtk_xmhtml_new): The widget starts up frozen and
 	thaws itself when it is realized.  This fixes all of the problems
 	regarding realization, gc creation, and window background setting.

	* Lots of changes all over the place to fix colors.  Things are
	*almost* working right now.  I think I'm only missing setting the
	window backgrounds appropriately.  Several things were done:

		- Motif's color and gc fields from Core and XmManager were
		  replicated inside the GtkXmHTML widget structure.

		- Macros were created in toolkit.h to use these fields.

		- Instead of the old kludgy set_{fore,back}ground_internal
		  functions, we now set the window background directly.
		  This does not work perfectly; I'll look into it.

		- I created a shade_color() function in colors.c (ok, ok,
		  I stole it from gtkstyle.c) which mimics XmGetColors()
		  -- it calculates shaded colors for the 3D look.

	I hope to fix the remaining problems with window backgrounds real
	soon now.
	
Thu Jan  8 20:57:16 1998  Federico Mena  <federico@bananoid.nuclecu.unam.mx>

	* images.c (_XmHTMLFillXImage): Created a my_gtk_image_new()
	function that is just like the GDK_IMAGE_NORMAL part of the real
	gdk_image_new(), but it also supports specification of the padding
	and bytes_per_line parameters.  This fixes the non-working images
	on 16bpp.  Let's see later about images with less than 8bpp...

Wed Dec 24 12:05:31 1997  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* XmHTML-motif.c, XmHTML.c, XmHTMLP.h, callbacks.c, forms.c,
	frames.c, gtk-xmhtml.c gtk-xmhtml.h images.c, map.c, test.c,
	toolkit.c: More code sharing between the Motif frontend an the Gtk
	frontned;   More portability macros;  

	* The widget now emits signals for all of the events that are
	interesting (same as the Motif ones, but signalified). 

	* Lots of events are now handled, only missing are the keybaord
	events. 
	

